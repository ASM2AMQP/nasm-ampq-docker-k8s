# Simplified Dockerfile that copies pre-built binary
FROM alpine:latest AS final

RUN adduser -D appuser \
 && mkdir -p /app \
 && chown -R appuser:appuser /app

WORKDIR /app

COPY start_amqp.sh .
RUN chmod +x start_amqp.sh

# Copy pre-built binary
COPY amqp-binary /app/amqp
RUN chmod +x /app/amqp

#USER appuser